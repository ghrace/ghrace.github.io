(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{94:function(s,t,n){"use strict";n.r(t);var a=n(0),e=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[n("p",[s._v("网上对vue源码的分析很多,大致了解下,先宏观再微观\n阅读源码前需了解的有")]),s._v(" "),n("ul",[n("li",[s._v("es6")]),s._v(" "),n("li",[s._v("Rollup(vue采用的构建工具,打包库适用)")]),s._v(" "),n("li",[s._v("flow(类型检查,和typescript类似)")])]),s._v(" "),n("h2",{attrs:{id:"了解vue"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#了解vue","aria-hidden":"true"}},[s._v("#")]),s._v(" 了解vue")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("├── src ----------------------------------- 这个是最应该关注的目录，包含了源码\n│   ├── compiler -------------------------- 编译器代码的存放目录，将 template 编译为 render 函数\n│   ├── core ------------------------------ 存放通用的，与平台无关的代码\n│   │   ├── observer ---------------------- 响应系统，包含数据观测的核心代码\n│   │   ├── vdom -------------------------- 包含虚拟DOM创建(creation)和打补丁(patching)的代码\n│   │   ├── instance ---------------------- 包含Vue构造函数设计相关的代码\n│   │   ├── global-api -------------------- 包含给Vue构造函数挂载全局方法(静态方法)或属性的代码\n│   │   ├── components -------------------- 包含抽象出来的通用组件\n│   ├── server ---------------------------- 包含服务端渲染(server-side rendering)的相关代码\n│   ├── platforms ------------------------- 包含平台特有的相关代码，不同平台的不同构建的入口文件也在这里\n│   │   ├── web --------------------------- web平台\n│   │   │   ├── entry-runtime.js ---------- 运行时构建的入口，不包含模板(template)到render函数的编译器，所以不支持 `template` 选项，我们使用vue默认导出的就是这个运行时的版本。大家使用的时候要注意\n│   │   │   ├── entry-runtime-with-compiler.js -- 独立构建版本的入口，它在 entry-runtime 的基础上添加了模板(template)到render函数的编译器\n│   │   │   ├── entry-compiler.js --------- vue-template-compiler 包的入口文件\n│   │   │   ├── entry-server-renderer.js -- vue-server-renderer 包的入口文件\n│   │   │   ├── entry-server-basic-renderer.js -- 输出 packages/vue-server-renderer/basic.js 文件\n│   │   ├── weex -------------------------- 混合应用\n│   ├── sfc ------------------------------- 包含单文件组件(.vue文件)的解析逻辑，用于vue-template-compiler包\n│   ├── shared ---------------------------- 包含整个代码库通用的代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[s._v("构建相关=> "),n("code",[s._v("运行时版 + Compiler = 完整版")]),s._v(",compiler将字符串模板编译为 render 函数")]),s._v(" "),n("h2",{attrs:{id:"构造函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构造函数","aria-hidden":"true"}},[s._v("#")]),s._v(" 构造函数")]),s._v(" "),n("p",[s._v("打开"),n("code",[s._v("./instance/index.js")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 从五个文件导入五个方法（不包括 warn）")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" initMixin "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./init'")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" stateMixin "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./state'")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" renderMixin "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./render'")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" eventsMixin "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./events'")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" lifecycleMixin "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./lifecycle'")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" warn "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'../util/index'")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 定义 Vue 构造函数")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("Vue")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'production'")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n    "),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Vue")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token function"}},[s._v("warn")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'Vue is a constructor and should be called with the `new` keyword'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("_init")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 将 Vue 作为参数传递给导入的五个方法")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("initMixin")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("stateMixin")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("eventsMixin")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("lifecycleMixin")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("renderMixin")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 导出 Vue")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("default")]),s._v(" Vue\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("p",[s._v("vue实际上就是一个用 Function 实现的类,那为什么不用Class实现呢,后面有很多 xxxMixin 的函数调用，并把 Vue 当参数传入，它们的功能都是给 Vue 的 prototype 上扩展一些方法，Vue 按功能把这些扩展分散到多个模块中去实现，而不是在一个模块里实现所有，这种方式是用 Class 难以实现的。这么做的好处是非常方便代码的维护和管理")]),s._v(" "),n("p",[s._v("先看"),n("code",[s._v("initMixin")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("initMixin")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Class"),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("Component"),n("span",{attrs:{class:"token operator"}},[s._v(">")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("_init")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),n("span",{attrs:{class:"token operator"}},[s._v("?")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("// ... _init 方法的函数体，")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 添加_init内部初始化方法 在上面构造函数上有执行")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("再看"),n("code",[s._v("stateMixin")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("stateMixin")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Class"),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("Component"),n("span",{attrs:{class:"token operator"}},[s._v(">")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" dataDef "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  dataDef"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("get")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_data "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" propsDef "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  propsDef"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("get")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_props "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'production'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    dataDef"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("set")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newData"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{attrs:{class:"token function"}},[s._v("warn")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),n("span",{attrs:{class:"token string"}},[s._v("'Avoid replacing instance root $data. '")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n        "),n("span",{attrs:{class:"token string"}},[s._v("'Use nested data properties instead.'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),s._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    propsDef"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("set")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{attrs:{class:"token function"}},[s._v("warn")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v("`$props is readonly.`")])]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//设置set让 $data,$props只读")]),s._v("\n  Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("defineProperty")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'$data'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dataDef"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("defineProperty")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'$props'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" propsDef"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("//添加$set $delete")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$"),n("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$"),n("span",{attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" del\n"),n("span",{attrs:{class:"token comment"}},[s._v("//添加$watch")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("$watch")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("//$watch 函数体")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("p",[s._v("接下来是"),n("code",[s._v("eventsMixin")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("//添加4个事件方法")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("eventsMixin")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Class"),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("Component"),n("span",{attrs:{class:"token operator"}},[s._v(">")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("$on")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{attrs:{class:"token comment"}},[s._v("//$on")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("$once")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v("  "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("//$once")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("$off")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("//$off")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("$emit")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("// $emit")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("下一个是"),n("code",[s._v("lifecycleMixin")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("//添加3个方法")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("lifecycleMixin")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Class"),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("Component"),n("span",{attrs:{class:"token operator"}},[s._v(">")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("_update")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("$forceUpdate")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("$destroy")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("最后一个"),n("code",[s._v("renderMixin")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("  "),n("span",{attrs:{class:"token comment"}},[s._v("// install runtime convenience helpers")]),s._v("\n  "),n("span",{attrs:{class:"token function"}},[s._v("installRenderHelpers")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("//$nextTick")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("$nextTick")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fn"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Function"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("nextTick")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fn"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("_render")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" VNode"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("//在vue原型添加一系列方法")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("installRenderHelpers")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" any"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_o "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" markOnce\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_n "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" toNumber\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_s "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" toString\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_l "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" renderList\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_t "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" renderSlot\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_q "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" looseEqual\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_i "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" looseIndexOf\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_m "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" renderStatic\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_f "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" resolveFilter\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_k "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" checkKeyCodes\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_b "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" bindObjectProps\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_v "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" createTextVNode\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_e "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" createEmptyVNode\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_u "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" resolveScopedSlots\n    target"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_g "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" bindObjectListeners\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h2",{attrs:{id:"vue构造函数的静态方法属性-全局api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue构造函数的静态方法属性-全局api","aria-hidden":"true"}},[s._v("#")]),s._v(" vue构造函数的静态方法属性(全局api)")]),s._v(" "),n("p",[s._v("打开"),n("code",[s._v("core/index.js")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("//Vue 的出生文件导入 Vue")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Vue "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./instance/index'")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" initGlobalAPI "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./global-api/index'")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" isServerRendering "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'core/util/env'")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" FunctionalRenderContext "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'core/vdom/create-functional-component'")]),s._v("\n\n"),n("span",{attrs:{class:"token function"}},[s._v("initGlobalAPI")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nObject"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("defineProperty")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'$isServer'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("get")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" isServerRendering\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//ssr相关")]),s._v("\nObject"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("defineProperty")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'$ssrContext'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("get")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("/* istanbul ignore next */")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$vnode "),n("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$vnode"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ssrContext\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// expose FunctionalRenderContext for ssr runtime helper installation")]),s._v("\nObject"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("defineProperty")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'FunctionalRenderContext'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  value"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" FunctionalRenderContext\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//存储了当前 Vue 的版本号")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'__VERSION__'")]),s._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("default")]),s._v(" Vue\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("p",[n("code",[s._v("initGlobalAPI")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("initGlobalAPI")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" GlobalAPI"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("// config")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" configDef "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  configDef"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("get")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" config\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'production'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    configDef"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("set")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{attrs:{class:"token function"}},[s._v("warn")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),n("span",{attrs:{class:"token string"}},[s._v("'Do not replace the Vue.config object, set individual fields instead.'")]),s._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("//加config")]),s._v("\n  Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("defineProperty")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'config'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" configDef"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),n("span",{attrs:{class:"token comment"}},[s._v("// exposed util methods.")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("// 以及 util 下的四个方法都不被认为是公共API的一部分，要避免依赖他们，")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("//但是你依然可以使用，只不过风险你要自己控制")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    warn"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    extend"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    mergeOptions"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    defineReactive\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" del\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("nextTick "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" nextTick\n\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("options "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("create")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("null")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token comment"}},[s._v("//空对象")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("//ASSET_TYPES=['component',  'directive', 'filter']")]),s._v("\n  "),n("span",{attrs:{class:"token constant"}},[s._v("ASSET_TYPES")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("forEach")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("type "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("options"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("type "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'s'")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("create")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("null")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),n("span",{attrs:{class:"token comment"}},[s._v('// this is used to identify the "base" constructor to extend all plain-object')]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("// components with in Weex's multi-instance scenarios.")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("options"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_base "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" Vue\n"),n("span",{attrs:{class:"token comment"}},[s._v("//extend来自于shared/util.js,builtInComponents 的属性混合到 Vue.options.components")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//builtInComponents 代码")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//import KeepAlive from './keep-alive'")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// export default {")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//   KeepAlive")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// }")]),s._v("\n  "),n("span",{attrs:{class:"token function"}},[s._v("extend")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("options"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("components"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" builtInComponents"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//到这options")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// Vue.options = {")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// \tcomponents: {")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// \t\tKeepAlive")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// \t},")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// \tdirectives: Object.create(null),")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// \tfilters: Object.create(null),")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// \t_base: Vue")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// }")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//use方法,安装插件")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("initUse")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" GlobalAPI"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("use")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("plugin"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Function "),n("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token function"}},[s._v("initUse")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("initMixin")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" GlobalAPI"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("mixin")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mixin"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("//合并options")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("options "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("mergeOptions")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("options"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mixin"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token function"}},[s._v("initMixin")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("initExtend")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" GlobalAPI"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v('/**\n   * Each instance constructor, including Vue, has a unique\n   * cid. This enables us to create wrapped "child\n   * constructors" for prototypal inheritance and cache them.\n   */')]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cid "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("let")]),s._v(" cid "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("//Class inheritance")]),s._v("\n  Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("extend")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("extendOptions"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Function "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("//添加cid extend")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token function"}},[s._v("initExtend")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("initAssetRegisters")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" GlobalAPI"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n "),n("span",{attrs:{class:"token comment"}},[s._v("//Create asset registration methods.")]),s._v("\n  "),n("span",{attrs:{class:"token constant"}},[s._v("ASSET_TYPES")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("forEach")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("type "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("type"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      id"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" string"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      definition"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Function "),n("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Object\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Function "),n("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Object "),n("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//vue又多三个方法component,directive,filter")]),s._v("\n  "),n("span",{attrs:{class:"token function"}},[s._v("initAssetRegisters")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br")])]),n("h2",{attrs:{id:"平台化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#平台化","aria-hidden":"true"}},[s._v("#")]),s._v(" 平台化")]),s._v(" "),n("p",[s._v("Vue是一个 Multi-platform 的项目（web和weex），不同平台可能会内置不同的组件、指令，或者一些平台特有的功能,主要看web平台"),n("br"),s._v("\n原来的config在"),n("code",[s._v("core/config.js")]),s._v("中")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  optionMergeStrategies"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("create")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("null")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  silent"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("false")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  productionTip"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'production'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  devtools"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'production'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  performance"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("false")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  errorHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("null")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  warnHandler"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("null")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  ignoredElements"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  keyCodes"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("create")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("null")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  isReservedTag"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" no"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  isReservedAttr"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" no"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  isUnknownElement"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" no"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  getTagNamespace"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" noop"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  parsePlatformTagName"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" identity"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  mustUseProp"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" no"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  _lifecycleHooks"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token constant"}},[s._v("LIFECYCLE_HOOKS")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("打开"),n("code",[s._v("platforms/web/runtime/index.js")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 覆盖初始化的config")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mustUseProp "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" mustUseProp\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("isReservedTag "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" isReservedTag\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("isReservedAttr "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" isReservedAttr\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getTagNamespace "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" getTagNamespace\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("isUnknownElement "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" isUnknownElement\n"),n("span",{attrs:{class:"token comment"}},[s._v("// install platform runtime directives & components")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//安装平台指令和组件")]),s._v("\n    platformDirectives"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        model"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        show\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("extend")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("options"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("directives"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" platformDirectives"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    platformComponents"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        Transition"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        TransitionGroup\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("extend")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("options"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("components"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" platformComponents"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//vue.options变为")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("options "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tcomponents"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\tKeepAlive"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\tTransition"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\tTransitionGroup\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tdirectives"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\tmodel"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\tshow\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tfilters"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("create")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("null")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t_base"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Vue\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("//是浏览器__patch__为patch方法,否则为空函数noop")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("__patch__ "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" inBrowser "),n("span",{attrs:{class:"token operator"}},[s._v("?")]),s._v(" patch "),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" noop\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// public mount method 添加$mount方法")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("$mount")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  el"),n("span",{attrs:{class:"token operator"}},[s._v("?")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" string "),n("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Element"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  hydrating"),n("span",{attrs:{class:"token operator"}},[s._v("?")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" boolean\n"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Component "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  el "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" el "),n("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v(" inBrowser "),n("span",{attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("query")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("el"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" undefined\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("mountComponent")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" el"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" hydrating"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br")])]),n("h2",{attrs:{id:"with-compiler"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#with-compiler","aria-hidden":"true"}},[s._v("#")]),s._v(" with compiler")]),s._v(" "),n("p",[s._v("运行版本已经成型,打开"),n("code",[s._v("entry-runtime")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Vue "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./runtime/index'")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("default")]),s._v(" Vue\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("完整版的 Vue，入口文件是 "),n("code",[s._v("entry-runtime-with-compiler.js")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 导入 运行时 的 Vue")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Vue "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./runtime/index'")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// ... 其他 import 语句")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 从 ./compiler/index.js 文件导入 compileToFunctions")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" compileToFunctions "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./compiler/index'")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 根据 id 获取元素的 innerHTML ")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" idToTemplate "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("cached")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" el "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("query")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" el "),n("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v(" el"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("innerHTML\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 使用 mount 变量缓存 Vue.prototype.$mount 方法")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" mount "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" Vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$mount\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 重写 Vue.prototype.$mount 方法")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("$mount")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  el"),n("span",{attrs:{class:"token operator"}},[s._v("?")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" string "),n("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Element"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  hydrating"),n("span",{attrs:{class:"token operator"}},[s._v("?")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" boolean\n"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Component "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token comment"}},[s._v("// ... 函数体省略")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("/**\n * 获取元素的 outerHTML\n */")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("getOuterHTML")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("el"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Element"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" string "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("el"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("outerHTML"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" el"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("outerHTML\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" container "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("createElement")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'div'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    container"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("appendChild")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("el"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("cloneNode")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token boolean"}},[s._v("true")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" container"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("innerHTML\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 在 Vue 上添加一个全局API `Vue.compile` 其值为上面导入进来的 compileToFunctions")]),s._v("\nVue"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compile "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" compileToFunctions\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 导出 Vue")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("default")]),s._v(" Vue\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])])])}],!1,null,null,null);e.options.__file="2018-09-27-vue-code1.md";t.default=e.exports}}]);